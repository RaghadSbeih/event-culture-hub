{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="container my-5" style="max-width: 700px;">

    {% if messages %}
    <div class="container mb-4">
        {% for message in messages %}
        <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
            {{ message }}
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
        {% endfor %}
    </div>
    {% endif %}
    
    <h2 class="mb-4">Profile Settings</h2>

    <form method="post" enctype="multipart/form-data" novalidate>
        {% csrf_token %}
        {{ form.non_field_errors }}

        <div class="mb-3">
            <label for="{{ form.first_name.id_for_label }}" class="form-label fw-semibold">First Name</label>
            {{ form.first_name }}
            {% if form.first_name.errors %}
                <div class="form-text text-danger">{{ form.first_name.errors|striptags }}</div>
            {% endif %}
        </div>

        <div class="mb-3">
            <label for="{{ form.last_name.id_for_label }}" class="form-label fw-semibold">Last Name</label>
            {{ form.last_name }}
            {% if form.last_name.errors %}
                <div class="form-text text-danger">{{ form.last_name.errors|striptags }}</div>
            {% endif %}
        </div>

        <div class="mb-4">
            <label for="{{ form.profile_picture.id_for_label }}" class="form-label fw-semibold">Profile Picture</label><br>
            {% if form.instance.profile_picture %}
                <img src="{{ form.instance.profile_picture.url }}" alt="Profile Picture" class="rounded mb-3" style="height:120px; object-fit: cover; border: 1px solid #ddd;">
            {% endif %}
            {{ form.profile_picture }}
            {% if form.profile_picture.errors %}
                <div class="form-text text-danger">{{ form.profile_picture.errors|striptags }}</div>
            {% endif %}
        </div>

        <div class="mb-3">
            <label for="{{ form.bio.id_for_label }}" class="form-label fw-semibold">Bio</label>
            {{ form.bio }}
            {% if form.bio.errors %}
                <div class="form-text text-danger">{{ form.bio.errors|striptags }}</div>
            {% endif %}
        </div>

        <div class="mb-3">
            <label for="{{ form.city.id_for_label }}" class="form-label fw-semibold">City</label>
            {{ form.city }}
            {% if form.city.errors %}
                <div class="form-text text-danger">{{ form.city.errors|striptags }}</div>
            {% endif %}
        </div>

        <div class="mb-4">
            <label for="{{ form.phone_number.id_for_label }}" class="form-label fw-semibold">Phone Number</label>
            {{ form.phone_number }}
            {% if form.phone_number.errors %}
                <div class="form-text text-danger">{{ form.phone_number.errors|striptags }}</div>
            {% endif %}
        </div>

        <div class="d-flex justify-content-end">
            <button type="submit" class="btn btn-primary px-4">Save Changes</button>
        </div>
    </form>
</div>
{% endblock %}